<!doctype html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">

        <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1">

        <link rel="icon" href="_scroll_external/logos/59f13d845123/default-space-logo.svg">

        <!-- Primary Meta Tags -->
        <meta name="exp-export-timestamp" content="2024-09-05T09:13:49.480+0000">
        <meta name="exp-page-id" content="192228503">
        <meta name="exp-page-title" content="OLD : ESB 1 : Errors in LogMessage">
        <meta name="exp-page-version" content="38">
        <meta name="exp-page-scroll-page-id" content="">
        <meta name="exp-page-created" content="2019-06-25T10:44:52.847+0000">
        <meta name="exp-page-last-modified" content="2023-11-10T15:39:25.163+0000">
        <meta name="exp-page-labels" content="favourite">
        <meta name="exp-page-context-keys" content="">
        <meta name="exp-space-key" content="PIODOC">
        <meta name="exp-space-title" content="protel.I/O documentation">

        <!-- Additional Meta Tags -->
        <meta name="exp-document-id" content="">
        <meta name="exp-document-title" content="protel.I/O documentation">
        <meta name="exp-version-status" content="">
        <meta name="exp-version-id" content="">
        <meta name="exp-version-name" content="">
        <meta name="exp-version-description" content="">
        <meta name="exp-version-date" content="">
        <meta name="exp-variant-id" content="">
        <meta name="exp-variant-name" content="">
        <meta name="exp-variant-description" content="">
        <meta name="exp-language-code" content="">
        <meta name="exp-language-name" content="">

        <link rel="stylesheet" href="css/app.css">
        <link rel="stylesheet" href="css/image-dimensions.css">


            
            
<script src="js/search.js"></script>
            <script id="search-worker" type="javascript/worker">
    onmessage = function(event) {
        // dispatch events to handling functions
        var message = event.data;

        if ((message.type === 'setup') && message.baseUrl) {
            setup(message.baseUrl);
        }

        if (message.type === 'search-request') {
            search(message.query);
        }
    }

    var searchIndex;

    function setup(baseUrl) {
        importScripts(
            baseUrl + 'js/lunr.js',
            baseUrl + 'js/lunr-index.js',
            baseUrl + 'js/lunr-data.js'
        );
        try {
            // load lunr-extras if it exists, which contains language-specific files for languages other than english
            importScripts(baseUrl + 'js/lunr-extras.js');
        } catch (e) {}
        searchIndex = lunr.Index.load(lunrIndex);
    }

    function search(query) {
        var searchHits = searchIndex.search(query);
        var results = searchHits.map(function (result) {
            return lunrData.filter(function (d) {
                return d.id === result.ref;
            })[0]
        });
        postMessage({ type: 'search-results', results: results, query: query });
    }
</script>
        <title>OLD : ESB 1 : Errors in LogMessage</title>

    <meta name="generator" content="Scroll HTML Exporter / K15t GmbH"></head>

    <body id="OLD:ESB1:ErrorsinLogMessage-top" data-pageid="192228503" data-confluence-editor-version="v1" data-confluence-deployment-type="DATACENTER">

        <div class="exp-grid-container">

            <header class="exp-header"></header>

            <div class="exp-logo">
                <a href="protel.I_O-documentation.192227604.html">
                    <span class="exp-logo-image" style="background-image: url(_scroll_external/logos/59f13d845123/default-space-logo.svg)" alt="protel.I/O documentation" title="protel.I/O documentation"></span>
                </a>
            </div>

            <div class="exp-document-title">
                <h1 class="exp-document-title-heading scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h1 scroll-relative-h1" data-scroll-heading-rank="1" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="1" id="no-src_generated-id-b46a1d7ac1d1dcb14a40214e98ef0f386e28f23d6d17ca2fd8a15e479150df8b">
                    <a href="protel.I_O-documentation.192227604.html">
                        protel.I/O documentation
                    </a>
                </h1>
            </div>

<div class="exp-search-container">
    <input type="search" id="search-textbox" autocomplete="off" class="exp-search-input" style="margin-right: 0;">
    <div class="exp-search-input-icon">
        <svg data-exp-id="magnifier-icon" data-exp-component="icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewbox="0 0 20 20" fill="none" aria-hidden="true">
            <path d="M8.99452 14.5C10.5121 14.5 11.809 13.9669 12.8854 12.9007C13.9618 11.8345 14.5 10.5361 14.5 9.00548C14.5 7.48794 13.9631 6.19097 12.8893 5.11458C11.8155 4.03819 10.519 3.5 9 3.5C7.46786 3.5 6.16816 4.0369 5.1009 5.11071C4.03363 6.18453 3.5 7.48096 3.5 9C3.5 10.5321 4.0331 11.8318 5.09929 12.8991C6.1655 13.9664 7.46391 14.5 8.99452 14.5ZM9 16C8.02913 16 7.11974 15.816 6.27185 15.4479C5.42395 15.0799 4.68056 14.5799 4.04167 13.9479C3.40278 13.316 2.90278 12.576 2.54167 11.728C2.18056 10.88 2 9.97053 2 8.99956C2 8.04152 2.18403 7.13542 2.55208 6.28125C2.92014 5.42708 3.41864 4.68387 4.04758 4.0516C4.67653 3.41935 5.41569 2.91935 6.26508 2.5516C7.11449 2.18387 8.02548 2 8.99806 2C9.95769 2 10.8646 2.18403 11.7188 2.55208C12.5729 2.92014 13.316 3.42014 13.9479 4.05208C14.5799 4.68403 15.0799 5.42612 15.4479 6.27835C15.816 7.13058 16 8.0381 16 9.00094C16 9.83365 15.8615 10.6213 15.5846 11.3638C15.3078 12.1062 14.9254 12.7836 14.4375 13.3958L18 16.9583L16.9375 18L13.375 14.4583C12.7668 14.9459 12.0939 15.3247 11.3564 15.5948C10.6188 15.8649 9.83333 16 9 16Z" fill="currentColor" />
        </svg>
    </div>
    <div id="search-suggestion-container" class="exp-search-suggestion-panel" data-exp-component="search-suggestion"></div>
    <template id="exp-search-suggestion-option-template">
        <div class="exp-search-suggestion-option-container search-form-suggestion">
            <a class="exp-search-suggestion-option search-form-suggestion" href=""></a>
        </div>
    </template>
</div>


            <nav class="exp-sidebar-navigation">
                <div class="exp-sidebar-navigation-sticky-wrapper">
                    <iframe src="toc.html?pageId=192228503" border="0"></iframe>
                </div>

            </nav>


            <nav aria-label="Breadcrumb" class="exp-breadcrumbs-wrapper">
                <ol class="breadcrumbs">
                        <li class="breadcrumb">
                            <a href="protel.I_O-documentation.192227604.html" rel="prev" target="_self">protel.I/O documentation</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="Integrations.192227608.html" rel="prev" target="_self">Integrations</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="_General-Installation-Details.192227757.html" rel="prev" target="_self">_General Installation Details</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="Integrations-FAQ.192228046.html" rel="prev" target="_self">Integrations FAQ</a>
                        </li>
                        <li class="breadcrumb">
                            <a href="Kibana.192228237.html" rel="prev" target="_self">Kibana</a>
                        </li>
                    <li class="breadcrumb active" aria-current="page">
                        OLD : ESB 1 : Errors in LogMessage
                    </li>
                </ol>
            </nav>


            <main class="exp-content">
                <article role="article">

                    <header>
                        <h1 class="article-heading scroll-h1 scroll-original-h1 scroll-relative-h1 scroll-custom-section-heading scroll-document-section-heading" role="heading" data-scroll-heading-rank="1" data-scroll-original-heading-rank="1" data-scroll-relative-heading-rank="1" id="no-src_generated-id-8378db1eb1d483f92cb5a2ee4226acaed4e100b16aef40ffd795e95f7697e57c">
                            OLD : ESB 1 : Errors in LogMessage
                        </h1>
                    </header>

                    <section class="page" id="content" role="main">
                        <div id="main-content" class="wiki-content article-content js-tocBot-content">
                            <div style="display: none;"><br clear="none"></div><div style="display: none;"><br clear="none"></div><div style="display: none;"><br clear="none"></div><div style="display: none;"><br clear="none"></div><div style="display: none;"><br clear="none"></div><div style="display: none;"><br clear="none"></div><div style="display: none;"><br clear="none"></div><div style="display: none;"><br clear="none"></div><p><img alt="(warning)" data-emoticon-name="warning" class="emoticon emoticon-warning scroll-document-image" src="_scroll_external/icons/6ba5d19de63c/warning.svg" data-emoji-short-name=":warning:"> This information is outdated - check the new version here <a data-scroll-target-source-id="192228652" data-scroll-link-target-source-id="192228652" data-scroll-link-type="document" href="ESB-2-_-Errors-in-LogMessage.192228652.html" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/ESB+2+%3A+Errors+in+LogMessage">ESB 2 : Errors in LogMessage</a><strong>&nbsp;</strong><img alt="(warning)" data-emoticon-name="warning" class="emoticon emoticon-warning scroll-document-image" src="_scroll_external/icons/6ba5d19de63c/warning.svg" data-emoji-short-name=":warning:"></p><p>(permanently adding new LogMessages)</p><p><br clear="none"></p><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1725527629551 {padding: 0px;}
div.rbtoc1725527629551 ul {margin-left: 0px;}
div.rbtoc1725527629551 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style></p><div class="toc-macro rbtoc1725527629551">
<ul class="toc-indentation">
<li><a data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" data-scroll-link-type="document" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html#OLD:ESB1:ErrorsinLogMessage-<<GeneralApproachwhentroubleshootingwithKibanalogmessage>>" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage#src-192228503_OLD:ESB1:ErrorsinLogMessage-<<GeneralApproachwhentroubleshootingwithKibanalogmessage>>">&lt;&lt; General Approach when trouble shooting with Kibana log message &gt;&gt;</a></li>
<li><a data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" data-scroll-link-type="document" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html#OLD:ESB1:ErrorsinLogMessage-<<Minimuminformationneededwhenescalatinganissue>>" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage#src-192228503_OLD:ESB1:ErrorsinLogMessage-<<Minimuminformationneededwhenescalatinganissue>>">&lt;&lt; Minimum information needed when escalating an issue &gt;&gt;</a></li>
<li><a data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" data-scroll-link-type="document" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html#OLD:ESB1:ErrorsinLogMessage-<<ERRORMESSAGES>>" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage#src-192228503_OLD:ESB1:ErrorsinLogMessage-<<ERRORMESSAGES>>">&lt;&lt; ERROR MESSAGES &gt;&gt;</a></li>
<li><a data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" data-scroll-link-type="document" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html#OLD:ESB1:ErrorsinLogMessage-<<ACCEPTABLEMESSAGEFLOWS>>" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage#src-192228503_OLD:ESB1:ErrorsinLogMessage-<<ACCEPTABLEMESSAGEFLOWS>>">&lt;&lt; ACCEPTABLE MESSAGE FLOWS &gt;&gt;</a>
<ul class="toc-indentation">
<li><a data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" data-scroll-link-type="document" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html#OLD:ESB1:ErrorsinLogMessage-RegularMessageFlow" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage#src-192228503_OLD:ESB1:ErrorsinLogMessage-RegularMessageFlow">Regular Message Flow</a></li>
<li><a data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" data-scroll-link-type="document" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html#OLD:ESB1:ErrorsinLogMessage-Large/SpecialMessageFlow" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage#src-192228503_OLD:ESB1:ErrorsinLogMessage-Large/SpecialMessageFlow">Large/Special Message Flow</a></li>
</ul>
</li>
<li><a data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" data-scroll-link-type="document" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html#OLD:ESB1:ErrorsinLogMessage-<<AcknowledgementMessagelogging>>" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage#src-192228503_OLD:ESB1:ErrorsinLogMessage-<<AcknowledgementMessagelogging>>">&lt;&lt; Acknowledgement Message logging &gt;&gt;</a></li>
</ul>
</div><p></p><h2 id="OLD:ESB1:ErrorsinLogMessage-<<GeneralApproachwhentroubleshootingwithKibanalogmessage>>" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2"><strong>&lt;&lt; General Approach when trouble shooting with Kibana log message &gt;&gt;</strong></h2><ol><li><span style="color: rgb(0,0,0);">Read the error message received - some of those point unambiguously to the reason/troubleshooting requirements. If that does not help, then read the <strong>ErrorMessage</strong> field in the failed record, If that does not help, then:</span></li><li><span style="color: rgb(0,0,0);">Analyse the entire workflow of the issue and the way it is logged in Kibana - it should match to one of the expected flows defined below. Looking at which point the error appears (or the flow stops) might give guidance where to continue the search. If that does not help, then:</span></li><li><span style="color: rgb(0,0,0);"> Check initial configurations (API communication settings), e.g.:</span><ol><li><span style="color: rgb(0,0,0);">BOB installation&nbsp;</span></li><li><span style="color: rgb(0,0,0);">BOB manifest</span></li><li><span style="color: rgb(0,0,0);">PWS IO Configuration</span></li><li><span style="color: rgb(0,0,0);">IDS settings</span></li><li><span style="color: rgb(0,0,0);">Handover documentation specifics (if for PROD env)<br clear="none"></span>(the below will be relevant to TEST env)</li></ol></li><li><span style="color: rgb(0,0,0);">Try to replicate the scenario using Postman </span></li><li><span style="color: rgb(0,0,0);">Ask the partner to try 1-4 on their end</span></li></ol><p><span style="color: rgb(0,0,0);"><img alt="(warning)" data-emoticon-name="warning" class="emoticon emoticon-warning scroll-document-image" src="_scroll_external/icons/6ba5d19de63c/warning.svg" data-emoji-short-name=":warning:">&nbsp;Some error messages are connected/related. It is important to analyze the entire flow. The message you're trying to solve might only be a consequence of the root cause, explained in a previously occurring error message.</span></p><p><span style="color: rgb(0,0,0);"><img alt="(warning)" data-emoticon-name="warning" class="emoticon emoticon-warning scroll-document-image" src="_scroll_external/icons/6ba5d19de63c/warning.svg" data-emoji-short-name=":warning:">&nbsp;If none of the above helps - refer to the table with Troubleshooting ideas below. If the description there still does not help - contact #io_integrations or #io_esb teams (or #io_partners)</span></p><p><span style="color: rgb(0,0,0);"><img alt="(warning)" data-emoticon-name="warning" class="emoticon emoticon-warning scroll-document-image" src="_scroll_external/icons/6ba5d19de63c/warning.svg" data-emoji-short-name=":warning:">&nbsp;If the error affects a lot of (all) customers - it is most probable that it is on protel end</span></p><h2 id="OLD:ESB1:ErrorsinLogMessage-<<Minimuminformationneededwhenescalatinganissue>>" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2"><strong><span style="color: rgb(0,0,0);">&lt;&lt; Minimum information needed when escalating an issue &gt;&gt;</span></strong></h2><ol><li><span style="color: rgb(0,0,0);">Environment </span></li><li><span style="color: rgb(0,0,0);">Hotel ID/Cloud ID </span></li><li><span style="color: rgb(0,0,0);">CID (at least 1 example)</span></li><li><span style="color: rgb(0,0,0);">Error message </span></li><li><span style="color: rgb(0,0,0);">Steps to re-produce</span></li><li><span style="color: rgb(0,0,0);">Describe the expected and the actual result</span></li></ol><h2 id="OLD:ESB1:ErrorsinLogMessage-<<ERRORMESSAGES>>" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2" class="scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2"><strong>&lt;&lt; ERROR MESSAGES &gt;&gt;</strong></h2><p><br clear="none"></p><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 85.782%;"><colgroup span="1"><col span="1" style="width: 3.25505%;"><col span="1" style="width: 21.9177%;"><col span="1" style="width: 29.8737%;"><col span="1" style="width: 33.589%;"><col span="1" style="width: 11.3646%;"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>N</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Kibana&nbsp;<span style="color: rgb(45,45,45);">LogMessage</span></p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Description / Meaning</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Trouble Shooting / Actions Required</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p><br clear="none"></p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E1</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Moved to Fault queue based on dead endpoint marker</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>This type of error indicates a dead endpoint from the remote. The affected vendor endpoint will be set as dead for 20mins then the dead EP marker will be deleted allowing all messages received by ESB in meantime to be sent out, or resent if got timeout on initial attempt.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>No action required</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E2</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>SOAP11 fault processing not supported yet</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Means that for now, any failed to be delivered SOAP11 request will not be queued for retries. We may add support for it in a future ESB release version if needed</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E3</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E4</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(45,45,45);">Failed after retryingY* times (HTTP 5xx*)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The message that we sent out tried to reach the partner EP but failed. Automatic re-try is done.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>If the workflow after this error message contains successful log messages, then there is nothing to worry about - this could be only a temporary net connection that was resolved.</p><p>If the following messages in the workflow are still with errors (e.g. E2), then analyze the flow prior to this error for the cause.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E5</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(45,45,45);">Failed to process soap response</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);text-decoration: none;">We send an outbound RQ but one of the following happens: </span></p><p><span style="color: rgb(0,0,0);text-decoration: none;">- we can not confirm we have received ACK or RS back </span></p><p><span style="color: rgb(0,0,0);text-decoration: none;">- the ACK/RS sent back are not in SOAP 1.2 xml format (e.g. JSON, invalid xml, text, etc...) thus can not be processed by us</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Ask the partner to provide you the ACK/RS that they attempt to send back for analysis</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E6</p></td><td colspan="1" rowspan="2" class="confluenceTd"><p><span style="color: rgb(45,45,45);">Error: Operation failed due to an unexpected error: Failed to send message to destination</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The partner EP was not reachable at all or for some time.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The ESB will re-try automatically for 24 hours every 15 min. If at some point there is an `Operation successfully executed'/'Message successfully processed' message, then no trouble shooting is needed. Otherwise, the EP provider needs to be contacted to check the status of the connection on their end. If the partner EP did not answer 24 hours after it was first pinged, then the message will be discarded. The reason could be in the BOB installation as well - setting up the EP. Do re-check the EP is set properly and is correct.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E7</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Internal ESB error (in that case which affects all customers)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">JTA transaction unexpectedly rolled back (could be due to a timeout); nested exception is javax.transaction.RollbackException: One or more resources refused to commit (possibly because of a timeout in the resource). This transaction has been rolled back instead.&lt;/message&gt;&lt;path&gt;/xslt/v1/transformation/chain --&gt; fixed - Fixed once already - unlikely to reproduce</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E8</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(45,45,45);">Failed to send large message out - error code: 500</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Unidentified cause - it is possible that the partner env is unstable. Not necessarily related to the xslt processing/large messages</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E9</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(45,45,45);">Failed with error: The message was dropped due to the requirements of the integration partner.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>An ESB filter is applied and the message was found to match it, thus - is being dropped and not delivered to the partner</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Check for any filters applied on the ESB (should be all seen in the manifest). Not an error (if the filter is applied correctly)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E10</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed with error: Invalid or unknown message sent as response</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Error available in the payload of the message that is attempted to be sent to protel.</span></p><p><span style="color: rgb(0,0,0);">Could be due to validation from partner side that is not met - in this case it is preceded by a diff error message: `Failed to send message out - error code: 413`</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Usually this is a consequential error message - there should be another one in the workflow - usually an HTTP one. The reasons for the error can vary, thus the resolution. The RS would not reach protel, so ask the sending party to provide it for analysis OR make sure it tally to protel documentation. </span></p><p><span style="color: rgb(0,0,0);">e.g. of the reason: </span></p><ol><li><span style="color: rgb(0,0,0);">Addressing part of the RS is wrong or missing (namespace, element &lt;Action&gt;) --&gt; in this case it would be preceeded by an HTTP_SC = 500 </span></li><li><span style="color: rgb(0,0,0);">Invalid authorization&nbsp;→ E16</span></li><li><span style="color: rgb(0,0,0);">Content-type mismatch&nbsp;→ see E11</span></li><li><span style="color: rgb(0,0,0);">Other validation of the message done by partner (can be any kind of element/attribute, path to it or content)</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E11</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The response from remote node for message has a bad HTTP response HTTP_SC = 415</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The "Content-Type" used between partners is diff </span></p><p><span style="color: rgb(0,0,0);">e.g. Protel is using application/soap+xml and partner is using text/xml</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Ask the partner to change their content-type. </span></p><p><span style="color: rgb(0,0,0);">In rare cases: If it is not possible, then add custom content-type in the http headers from BOB (manipulate the manifest for each message - not advisable!) </span></p><p><span style="color: rgb(0,0,0);">NOTE: There may not be anything in the Kibana logs to point to this specific error - but if you try to submit the message (e.g. send outbound RQ) using Postman, the error RS would be more specifically pointing to it.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E12</p></td><td colspan="1" rowspan="2" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Error: Operation failed due to an unexpected error: Method [RequestMessageName]* is not allowed for this module name:[service name]*</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The message type used is not found in the list of configured ones, allowed for this service (missing from the BOB manifest)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">If the message has to be supported for this service, then add it in the manifest</span></li><li>If the message is not part of the Integrations Agreement signed, then communicate it with partner and if necessary contact Protel Superior for extending the scope of the service</li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E13</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>JWT issue causing the pAir to reject a message and send the rejection as RS - and this action is not allowed per the configured service in ESB</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Raise a Jira ticket</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E14</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);text-decoration: none;">Failed with error: The response from remote node has a bad HTTP response HTTP_SC = 400</span></p><p><span style="color: rgb(0,0,0);text-decoration: none;">- OR -&nbsp;</span></p><p><span style="color: rgb(0,0,0);text-decoration: none;"><span style="color: rgb(0,0,0);">Failed with error: The response from remote node for message has a bad HTTP response HTTP_SC = 400</span></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">Mismatch in the type of the messages exchanged and expected - e.g. the sent RQ is JSON and the receiving EP is expecting an XML </span></li><li><span style="color: rgb(0,0,0);">Error in the partner EP (in the specific example reviewed, the partner wants the RQ message to be sent to EP1 but the RS for some of the message to be sent to a diff EP1. This is achievable with extra configuration settings in the manifest. In order to do that, the partner needs to add the EP in the SOAP header here /env:Header/htnga:ReplyTo/wsa:Address)</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E15</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">(Genius) The response from remote node for message has a bad HTTP response HTTP_SC = 202</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">NOTE: Some 202 error messages are due to ESB outage - those are not logged in Kibana but are received from the partner. Those message would still be correctly setn/processed/received - no troubleshooting needed.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The body of the message is not completely malformed. No need for a trouble shooting unless other error message accompanies the flow, in which case - those have to be worked out.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E16</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The response from remote node for message has a bad HTTP response HTTP_SC = 401</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">"Invalid security token" - the provided authorization from partner has failed.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Confirm with the partner that they are sending a message using the correct token (for the correct environment/hotel). Ask them to update it on their end. Would normally occur for Inbound RQ-s.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E17</p></td><td colspan="1" rowspan="2" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The response from remote node for message has a bad HTTP response HTTP_SC = 403</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Protel issue </span></p><p><span style="color: rgb(0,0,0);">e.g.: There's smth wrong with the authentication</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">Check the manifest details </span></li><li><span style="color: rgb(0,0,0);">Check the pms logs </span></li><li><span style="color: rgb(0,0,0);">Check with the dev team </span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E18</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Redis is down</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Contact ESB admin to restart redis. (1) Тhere is one RW master and several RO slaves In fact, redis master as a service was up and running, but for some reason it was unusable by ESB (2) Тhe problem is that it has insufficient memory on actual configuration -&nbsp; moved this service to a separate node on Nov-20,2018 sysctl vm.overcommit_memory=1, so redis issues should not happen again</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E19</p></td><td colspan="1" rowspan="2" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to send large message to processing</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The xslt-workers which do transformations for large messages fail from time to time (fail to answer back with ACK - which actually starts the processing)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Should not happen anymore - has been fixed with ticket <a rel="nofollow" href="https://jira-live.protel.net/browse/IO-4636" shape="rect" class="external-link scroll-external-link" data-scroll-link-type="default" data-scroll-link-target="https://jira-live.protel.net/browse/IO-4636" data-scroll-link-local="false">https://jira-live.protel.net/browse/IO-4636</a>. If it still occurs, ask for the xslt to be restarted</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E20</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">For some reason ESB had problems to successfully send the message to xslt-transform service - and it failed without storing info about this message internally. After that - when the response came from xslt-service (seems like the message still was sent but not acknowledged) - it failed because of missing internal info.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">This happens due to some backend configurations - the routings are not correctly set for AMQ and it fails from time to time. This is not the case for prod env - it is not likely to occur there.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E21</p></td><td colspan="1" rowspan="2" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Incoming response is too old to be processed or exceeded the number of allowed response messages</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Has resulted in combination with HTTP 400: The messages sent from protel was directed to 1 partner but another partner replied with RS using the same CID. </span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">Check the token in the installation against the hotel ID with the message in error and fix it. </span></li><li><span style="color: rgb(0,0,0);">Cendyn for some reason uses the `ModuleName io.protel.onpremise` instead of theirs - please check with them what is the token they are using. when we send a RQ out - we store a record like `XSTORAGE:7b0588b0-3910-4968-bb59-b55c3b05a370:com.cendyn.crm` in Redis and use it to match the incoming RS the problem is that since they are using the token for onpremise - they are identified with the wrong service name - hence we cannot identify it in redis because we try to identify this record `XSTORAGE:7b0588b0-3910-4968-bb59-b55c3b05a370:io.protel.onpremise` - it is missing and we reject the RS… </span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E22</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The partner is sending more than one RS to match with the same inbound RQ (the same CID)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E23</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Moved to Fault queue based on dead endpoint marker</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The EP of the partner was not accessible for some time (If a RQ was not processed in 15 sec delay - as a general rule - an EP is marked down if there are &gt;=50 RQ in an interval of 60 sec which have timeout or 502/3/4). </span></p><p><span style="color: rgb(0,0,0);">The ESB re-tried to re-send the messages a couple of times but failed. Thus the EP was marked as dead and messages were moved to Fault Queue to be stored.</span></p><p><span style="color: rgb(0,0,0);">The EP should be unmakred as dead in about 25 min.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">It is possible that an error from our end caused the partner EP to break (e.g. error in xslt message transformation that can happen especially if using Map2Any). Need to be researched further - the least - the queued messages will have to be released to partner and the EP has to be un-marked as dead. </span></li><li><span style="color: rgb(0,0,0);">From time to time the connection to the remote nodes drop to a higher value and ESB interpret them as down - the connection wait will need to be increased to a higher value. Currently: &lt;property name="SO_TIMEOUT" value="15000" scope="default"/&gt; &lt;property name="CONNECTION_TIMEOUT" value="3000" scope="default"/&gt;, where `SO_TIMEOUT` = read timeout - how much time ESB will wait for an answer from remote before if throws a timeout error `CONNECTION_TIMEOUT` = how much time ESB will wait the remote side to open a channel through which the message will be sent - usually this happens in 5-10millis - but sometime (as in the error-resulting case) - it goes up to hundreds of millis or even seconds</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E24</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Sent message to WS client, attempt n, n=1…?</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">If n&gt;1, this points to the state of the client PWS. </span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">If it is happening for more than one PWS-es (diff hotels IDs), then the best solution is to ask the ESB admins to re-start the websocket app which will trigger restart for all PWS-es. It might take about 15 min after that for the websocket retry queue to be consumed.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E25</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Message logged and discarded</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);text-decoration: none;">This is a result from a flag applied in the MMS - to discard the message and not send it to the partner. Would normally apply to RS messages.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The RQ is sent to all interested parties and the RS is directed back to the source system. The problem is that Travelclick uses different namespaces than we do and this seems to fail on IDeaS side and as they close the connection after receiving the first RS they never received ours. It seems that we have problems with RS's sent back to IDeaS in a wrong way but only for certain properties where a second service is connected. Please have a look at CorrelationID `991758:FALKEN:149438145-1261119819`. • `OTA_HotelRatePlanNotifRQ` coming in from `com.ideas.rms` • it gets processed by IO Gateway • RS gets sent back - but in Kibana there are 2 RS's (one from `com.travelclick.gms` and one from `io.protel.onpremise`) • It seems that the one coming from Travelclick is forwarded to IDeaS as well, i.e. the RS is marked to not be sent for the manifest in the connected service where this RS is not needed.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E26</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed with error: Invalid Hotel Code</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The hotel code + token pair as defined in the BOB manifest, is not matching</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">If an Inbound message to protel: ask the partner to configure on their end the correct Hotel-Token pair per our BOB installation (the same for internal Postman testing)</span></li><li><span style="color: rgb(0,0,0);"> If partner (and only then!) is not able to use our Cloud ID, then create an IO ticket in Jira for a new ESB filter (similar solution found for GHA)</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E27</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Invalid security token</span></p><p><span style="color: rgb(0,0,0);">- OR -&nbsp;</span></p><p><span style="color: rgb(0,0,0);">Invalid token</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">The token provided in the inbound message is not valid. The token is matched per the settings in the BOB installation. Confirm that the hotel code-token pair matches </span></li><li><span style="color: rgb(0,0,0);">Other possibilities would be a side effect of a tech/ESB issue</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">The token used is misspelled or wrong - ask the sender to edit it </span></li><li><span style="color: rgb(0,0,0);">The token is correct but the Hotel ID is not for this token - ask the sender to edit the HotelID</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E28</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Security token was not provided</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">Inbound message with missing authorization (bearer token) provided </span></li><li><span style="color: rgb(0,0,0);">Other possibilities would be a side effect of a tech issue: e.g. manner of storing messages on the ESB. Both have happened for outbound bulks. ESB checking for http header params is case sensitive and the `Authorization` param is being checked. Since IOGW lower all passing by http header params we have `authorization` value as inout for bulk requests. It happened because bulk requests were configured to go over IOGW from perspective to catch large messages and store them in S3 before sending them for processing and this issue started to be triggered. For the fix, these were again directly routed to bulk services.</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">Provide the bearer token from the BOB installation to the partner and ask them to add it to the HTTP headers of the xml. The token has to be provided in the http header parameters.</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E29</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">WSA Operation name [Fault] is not part of the current service</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">1. The ESB attempts to send a "FAULT" message out (due to errors in the received RQ/RS) </span></p><p><span style="color: rgb(0,0,0);">2. The format of the "FAULT" is not recognized by the external system </span></p><p><span style="color: rgb(0,0,0);">3. The external system returns the error</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Analyze the very message that is being sent by the partner and look for errors in it. In these cases it is very likely that the 3-rd party would not notice an error at all. Yet on our end - the workflow would not be complete (e.g. RQ sent out from protel but no RS back)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E30</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to send message to common processing queue</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">A problem with the transformation service for large messages processing</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Refer to the ESB team to analyze and fix the problem.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E31</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">WSA Operation name [mediate] does not match Payload [RequestMessageName]* operation name</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Error in the way the message is addressed.</span></p><p><span style="color: rgb(0,0,0);">Any of these is acceptable in our ESB (at least one should be sent) `SOAPAction: <a data-scroll-link-type="document" shape="rect" rel="nofollow" data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage">http://htng.org/PWSWG/2010/12/OTA_&lt;MSG_NAME&gt;_SubmitRequest</a>` or `SOAPAction: <a data-scroll-link-type="document" shape="rect" rel="nofollow" data-scroll-target-source-id="192228503" data-scroll-link-target-source-id="192228503" href="OLD-_-ESB-1-_-Errors-in-LogMessage.192228503.html" class=" scroll-document-link" data-scroll-link-target="https://confluence.weareplanet.com/display/PIODOC/OLD+%3A+ESB+1+%3A+Errors+in+LogMessage">http://htng.org/PWSWG/2010/12/OTA_&lt;MSG_NAME&gt;_SubmitResponse</a>` `SOAPAction: MSG_NAME` `Content-Type: application/soap+xml; action=&lt;MSG_NAME&gt;`</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">SOAP action parameter is missing in the HTTP header (e.g. soapaction = urn:mediate) or is wrong </span></li><li><span style="color: rgb(0,0,0);">No token was provided </span></li><li><span style="color: rgb(0,0,0);">The message is added in the partner manifest - but is not available in the general ones - for io.protel.air / io.protel.onpremise. </span></li><li><span style="color: rgb(0,0,0);">To see the issue in more details, review the exact message content with the error AND/OR try to push it through Postman to see if it would point to a more specific message</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E32</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to send message out - error code: 400</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The HTTP 400 error message is sent from the response side (partner) - due to errors in the messages (i.e. those were rejected)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">In this particular case: the xslt transformation was failing in transforming large messages. So those resulted with error in the content when they reached the partner and the partner reject them. The messages had to be downloaded from the S3 and re-sent manually from Postman. </span></li><li><span style="color: rgb(0,0,0);">There was an error in the content of the message sent to the partner - e.g. wrong ChainCode. As the message was large one, we did not send Error RS and the message resulted in failed as rejected from the partner.</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E33</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to send message out - error code: 404</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">A time-out on a re-trying/transformation</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">In the reviewed cases this referred to a failure in transforming a large message. It is best to review the entire workflow for the CID in error. If this message is followed by a normal (successful) workflow/ending, the outage was temporary and the message succeeded. Otherwise it should result back in another error.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E34</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to apply custom filters</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Extra filters are being added to the specific manifest for this partner. The same has failed to be applied while sending messages to them.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">If deactivate/activating back the filter and the installation does not help to solve the issue, refer to ESB admin.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E35</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The response from remote node for message has a bad HTTP response HTTP_SC = 503</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Prod ESB instance is not found.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">In that instance - it was due to the cloud being down.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E36</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The response from remote node for message has a bad HTTP response HTTP_SC = 404</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Error in connection with ESB.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Re-check the protel EP.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E37</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Input message has a wrong hotel code: XXXX*</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The RQ is logged only when it passes this check, so one would receive back a RS for this RQ with direct error (no other records in the log).</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Check E26 above</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E38</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to apply xslt transformation <em>for small messages - less than 100k</em></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">One or more of the ESB workers reject the message. Not partner/customer specific. Not related to filters set in MMS.&nbsp;</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Notify ESB team to check the case.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E39</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);text-decoration: none;">Failed to extract required outgoing configuration for hotel[XXXX]* and service [INSTALLATION_NAME]*</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Connection with BOB is broken (e.g. The Integration specialist has changed the EP in BOB for a partner)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">Make sure all necessary installations are in place (e.g. partner installation + io.protel.air or io.protel.onpremise) </span></li><li><span style="color: rgb(0,0,0);">Try to deactivate/inactivate back each of the installations for this hotel ID</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E40</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The response from remote node for message has a bad HTTP response HTTP_SC = 504</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The remote EP is unreachable and we do not retry it for 504. The error is sent automatically by our system - the partner would not have received the original message at all.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">&lt;property name="RS_PAYLOAD" expression="concat($ctx:RS_PAYLOAD, '&amp;lt;Error Code=&amp;quot;367&amp;quot; Type=&amp;quot;1&amp;quot; ShortText=&amp;quot;', $ctx:ERROR_MESSAGE,'&amp;quot;/&amp;gt;')"/&gt; Since the ESB does not re-try for 504 error, then the message should be re-sent from the PMS (PWS) once it is confirmed that the partner EP is active.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E41</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">502 Bad Gateway</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Issues with the protel environment - </span></p><p><span style="color: rgb(0,0,0);">(1) downtime (2) lack of storage (3) Redis is down (4) overloaded bulk nodes (5) other issue on the ESB</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Escalate to ESB admins. (bulk nodes are overloaded) (changes are being done on the ESB at the same time) (i have identified the issue with 502 - it was related to a message drop right before sending the ACK back the bug was added by me with the recent AMQ split - I have missed the point that i add a marker in redis for bulk related messages + that RS messages are coming via live endpoint and not the bulk endpoint after adding the fix hotelpartner client reported he does not see those timeouts anymore. all messages on ESB were processed correctly - all RS were sent correctly to the destination - the only issue was that the client did not received back the ACK message)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E42</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Unknown server error; Error while building message</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The RS message sent from partner does not have SOAP envelope (or other error in creating the messages structure accepted by the ESB)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Provide them an example</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E43</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to send message out - error code: 413</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">413 always comes from remote side - for some reason a validation on the partner side fails and their system does not respond or responds with an error. Usually followed by a `Failed with error: Invalid or unknown message sent as response`</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li><span style="color: rgb(0,0,0);">It is possible that the partner can not accept large messages or process them properly.</span></li><li><span style="color: rgb(0,0,0);">Other validation done by the partner that fails - best is to ask the partner what is that they validate for this message that fails on their end.</span></li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E44</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to send message out - error code: 500</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Combined with failure for large message transformation</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">In the reviewed case, the co-related messages in the workflow with the same CID are the key to handinling: a large message (5MB) is being sent to the loopback MIS - this the error. Those can not be handled with the loopback.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E45</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">(Message is not recorded in the Kibana log)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Has happened in past due to issues with AMQ. </span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Contact ESB admin - the messages should be available in the ESB logs and can be restored. No messages are lost/blocked - only the logging is not written in Kibana.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Е46</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to apply xslt transformation for small messages - less than 100k&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>In 90% of the cases this is an issue with the very transformation being applied (look for validation/structure/format rules mainly - less possible to be logical/algorithmic ones)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p style="text-align: left;">1.&nbsp;Find the rule applied on the esb; <br clear="none">2. Find the xslt reference in the smp; <br clear="none">3. Analyse the xslt code and troubleshoot. Most likely to happen on TEST environment only - before the xslt is fully tested with a specific partner integration. <br clear="none"><br clear="none">More information on xslt and Map2Any for the very troubleshooting can be found here:&nbsp;<a rel="nofollow" href="https://confluence.protel.net/display/ESB/Map2Any" shape="rect" class="external-link scroll-external-link" data-scroll-link-type="default" data-scroll-link-target="https://confluence.protel.net/display/ESB/Map2Any" data-scroll-link-local="false">https://confluence.protel.net/display/ESB/Map2Any</a></p></td><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E47</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(29,28,29);">The response from remote node for message has a bad HTTP response HTTP_SC = 406</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">The&nbsp; error message is sent from the response side (partner)&nbsp;<span style="color: rgb(29,28,29);">and it comes with empty payload</span><br clear="none" style="text-align: left;"></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(29,28,29);"><span>Please check with the partner if they send&nbsp;</span>valid error for any error they may encounter when processing our messages -<span>&nbsp;</span></span><code class="c-mrkdwn__code" style="text-align: left;">text/html</code><span style="color: rgb(29,28,29);"><span>&nbsp;</span>is not acceptable</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E48</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(52,55,65);">Error: Operation failed due to an unexpected SOAP/XML error: Failed to send message to destination</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Connection details to the third party are wrong. The message did not reach the partner.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><ol><li>Check in Kibana the value in column "TargetDestination" - it must match to the partner EP and the HotelID</li><li>Check details as configuration in the installation (or manifest -&gt; Environment details (in general and per message type, outbound))</li></ol></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E49</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(52,55,65);">Error processing response message: No message received within the allocated time (30000 ms) for CID:</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(29,28,29);">No message received within the allocated time.Тhe ESB was not able to process the message in the given time span of 30 seconds</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>Е50</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">Failed to remove matching CorrelationID record</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(29,28,29);">SocketTimeoutException: Read timed out - issues on ESB side regarding Redis</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(29,28,29);">Check if there is a major problem with the ESB , if not&nbsp;Tthe ESB dev team needs to be informed if the issue is not known</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E51</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span>Request failed with http status: 301; and error: Failed to send message out for CID [[]] to endpoint []; reason - Moved Permanently</span></p><p><br clear="none"></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(29,28,29);">This type of error indicates a dead endpoint from the remote.&nbsp;</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Check with the partner to confirm the EP</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E52</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span>Sent out large message&nbsp;failed with http code: 200</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(29,28,29);">This type of&nbsp; error indicates that&nbsp; large messages does not return a valid content-type back for ACK to&nbsp; ESB&nbsp;</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Check with the partner the content type they are sending&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: left;" class="confluenceTd"><p>E53*</p></td><td colspan="4" rowspan="1" style="text-align: left;" class="confluenceTd"><p><strong><span style="color: rgb(0,0,0);">Error message: Operation failed due to an unexpected error: Failed to send message to destination:</span></strong></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>1)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Sender input/output error sending - 101500<span style="color: rgb(23,43,77);">&nbsp;)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Means that there is something wrong in ESB when sending a RQ out<span>&nbsp;</span></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This is mostly due to a bug in ESB or misconfiguration</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>2)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Sender input/output error receiving - 101501)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Means that there was an unknown error on receiving a RS/ACK from remote client<span>&nbsp;</span></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This is not an ESB bug but mostly due to an unexpected processing on remote side</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>3)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Connection failed - 101503)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Unable to connect to remote client EP</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This is not an ESB issue - it only means that remote client EP is not reachable in that moment of time (usually this happen when it is overloaded)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>4)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Connection timed out (no input was detected on this connection over the maximum period of inactivity) - 101504)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This means that ESB sent the message out, it reached the client service, but remote client did not answer back with a RS/ACK in allowed time (15-20 sec for ASYNC, 30sec for SYNC)<span>&nbsp;</span></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Mostly due to partner system overload. Other less possible cases for PROD env:</span></p><ul style="list-style-type: square;"><li><span style="color: rgb(23,43,77);">Missing ACK</span></li><li><span style="color: rgb(23,43,77);">Malformed ACK</span></li></ul></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>5)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Connection closed - 101505)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">ESB sent (or tried to) the message out but remote client unexpectedly closed the connection during the message transfer (header params)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This is not an ESB issue - this is a remote client issue and they must analyze why this happened</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>6)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (NHTTP protocol violation - 101506</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);"><span>S</span>omething is wrong on remote side, like- we are trying to send a HTTP requests but they expect a TCP or websocket or other protocol =&gt; not an ESB issue (except if EP is invalid in BOB in which case this has to be fixed there)<span>&nbsp;</span></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);"><span>&nbsp;R</span>emote client must be called and asked to fix this - this is a very rare issue - dont think it ever happened with Protel installations</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>7)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Connection canceled - 101507)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);"><span>T</span>his is a similar to 101504 error just that the message is already sent out (we distinguish between the case 101505 when the request was about to begin the transfer and 101507 when it finished to transfer the message)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Mostly due to partner system overload</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>8)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Request to establish new connection timed out - 101508)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This happens when ESB is trying to establish a connection with remote node, there is a configured timeout for this (3 sec for Protel ESB) - so if client refuses to allow a connection within 3 sec - ESB process this as an error</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This usually happens when remote client is overloaded</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>9)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Failed to send message to destination (Send abort - 101509&nbsp;)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This happens usually when a large message is sent out and it takes a very long time (due to limited band with for ex)<span>&nbsp;</span></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">This is an ESB decision to limit the resources consumption - usually this is set to 60 or 120sec. We did not have yet&nbsp; such errors in Protel</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>10)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Response processing failed - 101510)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">There was an error in the response that ESB couldn't process (wrong payload for example)</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Check the received data, then ask the client (if it is the case) to fix it on its side</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" style="text-align: right;" class="confluenceTd"><p>11)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to send message to destination (Response timeout)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Any message that is not part of this error list above will be logged with this default value<span>&nbsp;</span></span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);"><span>&nbsp;M</span>ust be checked in the ESB internal logs to see what is the reason&nbsp;</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E54</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span>Message not allowed to be sent out to websocket service</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Such a messages is acceptable for HotelID with multiple installations. The<span style="color: rgb(29,28,29);">&nbsp;problem affects all customers with IDS installation - so the more such are available, the higher the queue with open WS connections that can not move forward in ESB.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(29,28,29);">Currently - this message shows that a redundant message was dropped from being directed towards an existing IDS installation for the customer. You should treat this message as "expected"/"normal" workflow</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E55</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(52,55,65);">Message processing failed - store to internal queue for retry</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>An internal processing error within the ESB caused by invalid parameters (e.g wrong ESB filter referenced in the partner manifest)</p><p>The message will be re-tried for 50 times within 10 sec. Afterwards it will be moved to&nbsp;<span style="color: rgb(23,43,77);">ActiveMQ.DLQ queue in the ESB. From there it is to be manually removed permanently and can no longer be re-tried.</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Check the partner settings in MMS/MIS for faulty setup on ESB parameters/values</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E56</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Invalid ACK received from remote</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Partner has sent ACK message which is not a soap 1.2 xml (e.g. message sent is an html/json)</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The ESB can process only SOAP 1.2 xml format. If partner sends a different one - the message can not be logged. Thus the message is converted to SOAP 1.2 and stored in Kibana under this LogMessage. To see what the partner originally sent to the ESB, do:<br clear="none"></p><ul style="list-style-type: square;"><li>check the payload of the message&nbsp;</li><li>copy the value of element &lt;Text&gt;</li><li>in browser - find an open source to convert the message to its original state (html to chars conversion): e.g.&nbsp;<a rel="nofollow" href="https://www.online-toolz.com/tools/text-html-entities-convertor.php" shape="rect" class="external-link scroll-external-link" data-scroll-link-type="default" data-scroll-link-target="https://www.online-toolz.com/tools/text-html-entities-convertor.php" data-scroll-link-local="false">https://www.online-toolz.com/tools/text-html-entities-convertor.php</a></li><li>convert the message =&gt; the converted message is the one sent by partner.</li></ul><p>If there is no &lt;Text&gt; element - then the HTTP status sent by the partner EP was different than 200 with no payload.</p><p></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E57</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Operation failed due to an unexpected error: violation of asynchronous communication pattern</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>The triggered message is matched by name with all enabled message types in the partner manifest. The message type was then not found in the MMS for this partner.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>If the specific&nbsp;[RequestMessageName*] is supposed to be sent to partner, then make sure it is included in the resp manifest.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p><span class="scroll-jira-issue-placeholder" data-scroll-ref="jira-issue-563c449055846aaa0ce41bb1844b0215" data-scroll-jira-issue-key="IO-6187" data-scroll-jira-issue-show-summary="true">IO-6187</span></p></div></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E58</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(52,55,65);">Sending message to throttling queue</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Not an error message. The message indicates that the THROTTLING has been enabled (with resp parameters) in the MMS for the respective service. The messages will be stored in the queue and sent out per the parameters defined in MMS.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Throttling should be applied with high caution and with as lower throttling timing as possible since this consumes extra resources on the ESB.</p><p>If the throttling is not intentional or not requested anymore by the vendor - edit the vendor's MMS</p><p>No throttling is applied on large message flow</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span><a rel="nofollow" href="https://jira-live.protel.net/browse/IO-6207" shape="rect" class="external-link scroll-external-link" data-scroll-link-type="default" data-scroll-link-target="https://jira-live.protel.net/browse/IO-6207" data-scroll-link-local="false">https://jira-live.protel.net/browse/IO-6207</a></span></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E59</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Warning - SYNC call duration exceeded 30 seconds&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>SYNC workflow communication has been exceeded to 60 seconds. The warning message only indicates that the 30 seconds former acceptable timing for receiving a RS from the receiver has been exceeded. Likely to appear on large messages transfer.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>No damage to the file transfer - only a warning that the message transfer takes too long</p></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p><span class="scroll-jira-issue-placeholder" data-scroll-ref="jira-issue-25f503d68bb32d63ef56568810b2a725" data-scroll-jira-issue-key="IO-6214" data-scroll-jira-issue-show-summary="true">IO-6214</span></p></div></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E60</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>HTTP 421 - Misdirected Request</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>An OTA_HotelResNotifRQ inbound has been sent to the ESB EP instead of the PCI (CD-Proxy) EP</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Reservations inbound must always be sent to the CD-proxy EP due to PCI compliance. If there are payment details that would need to be tokenized - this happens only on the CD-Proxy EP. Once tokenization is done, then the message is forwarded to the ESB EP automatically. If there were no CC details to hide/tokenize - then the forward to the ESB is done with no changes to the API. <br clear="none">Use proper routing of messages.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E61</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(23,43,77);">Failed to process message - move to fault processing service</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Generic error where the workflow is not completed as defined in MMS settings. All these messages are put into a fault processing queue from where they are subject of retries.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Check with the recipient (service destination) of the failed msg for the exact failure reason.</p><p>Analyze the workflow itself - e.g. ACK (for async) / RS for sync within acceptable time frames.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><br clear="none"></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E62</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Failed to process message - cannot finish ASYNC/SYNC flow due to invalid loopback response from ESB</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>A sub-variation of E61 where the defined workflow is ASYNC-SYNC:</p><p>sender sends ASYNC RQ and expects only RS back but receiver provided an ACK instead of the actual RS. Thus, it is considered that the RQ msg was successfully delivered - only the workflow is broken. To avoid duplicate postings - the message will not be retried.&nbsp;</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Check with the recipient (service destination) of the failed msg for the exact failure reason.</p><p>Analyze the workflow itself - e.g. ACK (for async) / RS for sync within acceptable time frames.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p><span class="scroll-jira-issue-placeholder" data-scroll-ref="jira-issue-80b7d52b79f07fbc80aa2c419efaa77d" data-scroll-jira-issue-key="IO-6841" data-scroll-jira-issue-show-summary="true">IO-6841</span></p></div></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>E63</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(52,55,65);">Moved to Fault queue based on lazy client detector</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Partner is sending late ACK/RS due to which the ESB consumes resources to keep the connection open while waiting on the partner to respond. Thus - a manual flag is set in the ESB to move this partner msgs to a separated queue for fault processing/retries.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Flow is intentionally set to prevent ESB from crashing. Partner needs to take actions to fix the flow on their end. Only then the flag will be removed from their service.</p></td><td colspan="1" rowspan="1" class="confluenceTd"><div class="content-wrapper"><p><span class="scroll-jira-issue-placeholder" data-scroll-ref="jira-issue-5ee53145da2565aefdf6b5e9b6739fa6" data-scroll-jira-issue-key="IOTEC-3102" data-scroll-jira-issue-show-summary="true">IOTEC-3102</span></p></div></td></tr></tbody></table></div><p class="auto-cursor-target" style="text-align: left;">[<span style="color: rgb(45,45,45);">RequestMessageName</span>]* = Valid for all message types</p><p class="p1">Operation successfully executed for SYNC request</p><p class="auto-cursor-target"><span style="color: rgb(0,0,0);">[service name]* = The name of the partner as defined in the BOB installation</span></p><p class="auto-cursor-target"><span style="color: rgb(45,45,45);">Y* = integer. The re-trying may continue up to 24 hours.</span></p><p class="auto-cursor-target"><span style="color: rgb(45,45,45);"> 5xx* = 500, 502, 503, 504</span></p><h2 class="auto-cursor-target scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2" id="OLD:ESB1:ErrorsinLogMessage-<<ACCEPTABLEMESSAGEFLOWS>>" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2"><strong>&lt;&lt; ACCEPTABLE MESSAGE FLOWS &gt;&gt;</strong></h2><h3 class="auto-cursor-target scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="OLD:ESB1:ErrorsinLogMessage-RegularMessageFlow" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3"><strong>Regular Message Flow</strong></h3><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="width: 56.2439%;"><colgroup span="1"><col span="1" style="width: 3.67424%;"><col span="1" style="width: 54.0731%;"><col span="1" style="width: 42.2636%;"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>N</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Kibana&nbsp;<span style="color: rgb(45,45,45);">LogMessage</span></p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Details</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>R0</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">RQ: New bulk request coming in</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>For bulk messages only- the respective message comes out of a bulk job. Only possible for messages from protel to partner</p></td></tr><tr><td colspan="1" rowspan="1" style="margin-left: 30.0px;" class="confluenceTd"><p>R1</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">RQ: New request coming in</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Request message from sender to the ESB</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>R2</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">RQ: Message sent out to remote client</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Request message forwarded from the ESB to the recipient of the RQ</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>R3</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>ACK: <span style="color: rgb(52,55,65);">Operation successfully executed</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>For ASYNC flow only - ACK msg sent from recipient of the RQ. RequestMessageName: <span style="color: rgb(52,55,65);">HTNG_AcknowledgeReceipt</span></p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>R4</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">RS:&nbsp;New request coming in</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Response Message received from the recipient of the RQ to the ESB</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>R5</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RS:&nbsp;<span style="color: rgb(0,0,0);">Message sent out to remote client</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Response Message forwarded from the ESB to the recipient of the RS</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>R6</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p><span style="color: rgb(0,0,0);">ACK: Operation successfully executed</span></p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>For ASYNC flow only - ACK msg sent from recipient of the RS. RequestMessageName: <span style="color: rgb(52,55,65);">HTNG_AcknowledgeReceipt</span></p></td></tr></tbody></table></div><p><strong style="letter-spacing: 0.0px;">*</strong><span style="letter-spacing: 0.0px;">R2 onwards can be duplicated if there is more than one installation&nbsp;</span></p><h3 class="auto-cursor-target scroll-original-h3 scroll-custom-section-heading scroll-document-section-heading scroll-h3 scroll-relative-h3" id="OLD:ESB1:ErrorsinLogMessage-Large/SpecialMessageFlow" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="3" data-scroll-original-heading-rank="3" data-scroll-relative-heading-rank="3"><strong style="letter-spacing: -0.003em;">Large/Special Message Flow</strong></h3><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 56.1947%;"><colgroup span="1"><col span="1" style="width: 3.50263%;"><col span="1" style="width: 54.2086%;"><col span="1" style="width: 42.3006%;"></colgroup><thead><tr><th colspan="1" rowspan="1" class="confluenceTh"><p>N</p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Kibana&nbsp;<span style="color: rgb(45,45,45);">LogMessage</span></p></th><th colspan="1" rowspan="1" class="confluenceTh"><p>Details</p></th></tr></thead><tbody><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>L1</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RQ: New request coming in</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Request message send out from the PMS to the ESB</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>L2</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RQ: Message sent out to transformation service</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Message is sent out to the xslt - transform&nbsp;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>L3</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RQ: Sending large message to xslt transformation</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Message is sent out to the xslt - transform&nbsp;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>L4</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RQ: Large message processing successfully started</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Message is sent out to the xslt - transform&nbsp;</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>L5</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RQ: Large message transformations finished, sending the response out to remote destination</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Request message send out from the ESB to the client EP</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>L6</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RQ: Large message successfully sent out to outgoing destination</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Request message has been successful acknoweged by the customer EP</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>L7</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RS: New request coming in</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Response Message received from the customer EP to the ESB</p></td></tr><tr><td colspan="1" rowspan="1" class="confluenceTd"><p>L8</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>RS: Message successfully processed</p></td><td colspan="1" rowspan="1" class="confluenceTd"><p>Request message successful reached PMS EP</p></td></tr></tbody></table></div><p class="auto-cursor-target"><strong>*</strong>L2 onwards can be duplicated if there is more than one installation&nbsp;<br clear="none"><strong>*</strong>L3 message is seen as well in case a special customized ESB transformation is being applied that changes the message from its original payload to a partner preference</p><p class="auto-cursor-target"><img alt="(warning)" data-emoticon-name="warning" class="emoticon emoticon-warning scroll-document-image" src="_scroll_external/icons/6ba5d19de63c/warning.svg" data-emoji-short-name=":warning:"> Message sent from PMS and message sent from ESB are different messages. Please be careful when choosing which one should be reviewed!</p><h2 class="auto-cursor-target scroll-original-h2 scroll-custom-section-heading scroll-document-section-heading scroll-h2 scroll-relative-h2" id="OLD:ESB1:ErrorsinLogMessage-<<AcknowledgementMessagelogging>>" data-scroll-heading-rank-offset="1" data-scroll-heading-rank="2" data-scroll-original-heading-rank="2" data-scroll-relative-heading-rank="2"><strong>&lt;&lt; Acknowledgement Message logging &gt;&gt;</strong></h2><p>The presence of an ACK message is mandatory for every Async communication flow in its various combinations as described here:&nbsp;<a href="https://confluence.weareplanet.com/pages/viewpage.action?pageId=177178094" class="scroll-confluence-link" data-scroll-link-type="default" data-scroll-link-target="https://confluence.weareplanet.com/pages/viewpage.action?pageId=177178094" data-scroll-link-local="true">ESB async/sync mixed message flow example</a>. Thus if the ACK message by a vendor is missing for any reason - the message workflow can not be completed. Here are the possible outcomes in a nutshell (detailed in the table with errors above)</p><ol><li class="auto-cursor-target">If vendor is sending ACK in time and its format is correct but the type is not SOAP 1.2 xml (e.g. JSON), then we log error "<span style="color: rgb(23,43,77);">Invalid ACK received from remote</span>" - refer to E56</li><li class="auto-cursor-target">If vendor is not sending any ACK message, then the communication breaks and we log error "Failed to send message to destination (Connection timed out (no input was detected on this connection over the maximum period of inactivity) - 101504)" - refer to E53.4)</li><li class="auto-cursor-target">If vendor sends the ACK message with delay higher than the acceptable (~15 sec), then the timeout leads to the same result as in case 2. =&gt;&nbsp;we log error "Failed to send message to destination (Connection timed out (no input was detected on this connection over the maximum period of inactivity) - 101504)" - refer to E53.4)</li><li class="auto-cursor-target">If partner sends ACK with the attempt to be SOAP 1.2 xml but there is smth in the payload which corrupts the valid SOAP 1.2 xml structure, then we are not able to identify and process the message through the ESB since it is not valid and the connection will timeout, leading to the same outcome as point 2. =&gt;&nbsp;we log error "Failed to send message to destination (Connection timed out (no input was detected on this connection over the maximum period of inactivity) - 101504)" - refer to E53.4).&nbsp;</li></ol><p>Note - the ACK is a communication protocol message with payload. A successful ACK submit contains HTTP200 and the OTA standard payload. However - having a payload for the message <u>does not mean</u> this should be treated as a separate integration message so it should not be added to MMS.</p>
                        </div>
                    </section>

                </article>
            </main>


                <nav class="exp-post-navigation-prev">
                    <a href="ESB-2-_-Errors-in-LogMessage.192228652.html" class="post-navigation-link">
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-prev">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                        <span>ESB 2 : Errors in LogMessage</span>
                    </a>
                </nav>

                <nav class="exp-post-navigation-next">

                    <a href="KSK.192228321.html" class="post-navigation-link">
                        <span>KSK</span>
                        <svg width="22px" height="22px" viewbox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg">
                            <g id="ht-icon-next">
                                <path fill="currentColor" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2" transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) " />
                            </g>
                        </svg>
                    </a>

                </nav>


            <nav class="exp-sidebar-toc js-tocBot">
                <!-- content generated by toc.js  -->
            </nav>

            <div class="exp-sidebar-navigation-toggle">
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
                <div class="exp-sidebar-navigation-toggle-icon-line"></div>
            </div>

            <div class="exp-scroll-to-top-container">
                <a href="#OLD:ESB1:ErrorsinLogMessage-top" class="exp-scroll-to-top-link">↑ Back to top</a>
            </div>

        </div>



<dialog class="exp-lightbox-container" aria-modal="true">
    <div class="lightbox-toolbar">
        <button type="button" class="exp-lightbox-close">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                <path fill="currentColor" d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z" />
            </svg>
        </button>
    </div>
    <div class="lightbox-content content">
    </div>
</dialog>

<template id="exp-lightbox-wrapper-template">
    <div class="exp-lightbox-wrapper">
        <div class="exp-lightbox-toggle">
            <button type="button" class="exp-lightbox-close">
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 -960 960 960" aria-hidden="true">
                    <path fill="currentColor" d="M120-120v-320h80v184l504-504H520v-80h320v320h-80v-184L256-200h184v80H120Z" />
                </svg>
            </button>
        </div>
    </div>
</template>

        <script src="js/tocbot.min.js"></script>
        <script src="js/article-toc.js"></script>
        <script src="js/app.js"></script>
        <script src="js/mobile.js"></script>
        <script src="js/iframe-resizer.parent.js"></script>

    </body>

</html>